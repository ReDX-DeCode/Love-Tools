<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Meter Magic</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;500;600&display=swap');
        
        :root {
            --primary: #ff6b8b;
            --secondary: #ff8e9e;
            --dark: #d23369;
            --light: #fff5f7;
            --darker: #a82b55;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        
        h1 {
            font-family: 'Dancing Script', cursive;
            font-size: 3.5rem;
            color: var(--dark);
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: pulse 2s infinite;
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: #666;
        }
        
        /* Tab Navigation */
        .tab-container {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .tab-btn {
            background: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(210, 51, 105, 0.1);
            color: var(--dark);
        }
        
        .tab-btn.active {
            background: linear-gradient(45deg, var(--primary), var(--dark));
            color: white;
            box-shadow: 0 4px 15px rgba(210, 51, 105, 0.3);
        }
        
        .tab-btn:hover:not(.active) {
            background: #f8e1e6;
        }
        
        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tool-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.2);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .tool-card h2 {
            color: var(--dark);
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }
        
        .tool-card::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 100px;
            height: 100px;
            background-color: var(--primary);
            border-radius: 50%;
            opacity: 0.1;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        input, select {
            padding: 0.8rem 1rem;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            text-align: center;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 139, 0.2);
        }
        
        button {
            background: linear-gradient(45deg, var(--primary), var(--dark));
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(210, 51, 105, 0.3);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 1rem;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(210, 51, 105, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .result-container {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #fff9fa;
            border-radius: 10px;
            border: 1px dashed var(--secondary);
            animation: fadeIn 0.5s;
        }
        
        .result-title {
            font-family: 'Dancing Script', cursive;
            font-size: 2rem;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        
        .hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .heart {
            position: absolute;
            opacity: 0;
            animation: float 6s ease-in infinite;
        }
        
        .heart::before, .heart::after {
            content: '';
            position: absolute;
            top: 0;
            width: 20px;
            height: 32px;
            border-radius: 20px 20px 0 0;
            background: var(--primary);
        }
        
        .heart::before {
            left: 20px;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }
        
        .heart::after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }
        
        /* Timeline Styles */
        .timeline {
            position: relative;
            max-width: 500px;
            margin: 2rem auto;
        }
        
        .timeline::after {
            content: '';
            position: absolute;
            width: 3px;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -1.5px;
            border-radius: 10px;
        }
        
        .timeline-item {
            padding: 10px 40px;
            position: relative;
            width: 50%;
            box-sizing: border-box;
        }
        
        .timeline-item:nth-child(odd) {
            left: 0;
            text-align: right;
        }
        
        .timeline-item:nth-child(even) {
            left: 50%;
            text-align: left;
        }
        
        .timeline-content {
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .timeline-item:nth-child(odd) .timeline-content::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 15px;
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-left: 10px solid white;
        }
        
        .timeline-item:nth-child(even) .timeline-content::after {
            content: '';
            position: absolute;
            left: -10px;
            top: 15px;
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-right: 10px solid white;
        }
        
        .timeline-year {
            font-weight: bold;
            color: var(--dark);
            margin-bottom: 5px;
        }
        
        /* Date Ideas Grid */
        .date-ideas {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .date-card {
            background: white;
            border-radius: 10px;
            padding: 1.2rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            border: 1px solid #ffebee;
        }
        
        .date-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(210, 51, 105, 0.2);
        }
        
        .date-card h3 {
            color: var(--dark);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .date-card p {
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Anniversary Counter */
        .counter-display {
            font-size: 2.5rem;
            font-family: 'Dancing Script', cursive;
            color: var(--dark);
            margin: 1rem 0;
        }
        
        .counter-unit {
            font-size: 1rem;
            color: #666;
            display: block;
            margin-top: -0.5rem;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            position: relative;
            animation: slideUp 0.4s;
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }
        
        /* Animation Keyframes */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-500px) rotate(360deg);
                opacity: 0;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="hearts" id="hearts-container"></div>
    
    <div class="container">
        <h1>Love Meter Magic</h1>
        <p class="subtitle">Discover your cosmic connection with your special someone</p>
        
        <!-- Tab Navigation -->
        <div class="tab-container">
            <button class="tab-btn active" data-tab="love-calculator">Love Calculator</button>
            <button class="tab-btn" data-tab="nickname-generator">Couple Nickname</button>
            <button class="tab-btn" data-tab="love-timeline">Love Timeline</button>
            <button class="tab-btn" data-tab="anniversary-counter">Anniversary</button>
            <button class="tab-btn" data-tab="date-ideas">Date Ideas</button>
        </div>
        
        <!-- Love Calculator Tab -->
        <div id="love-calculator" class="tab-content active">
            <div class="tool-card">
                <h2>Love Calculator</h2>
                <p>Enter your names to calculate your love compatibility</p>
                
                <div class="input-group">
                    <input type="text" id="name1" placeholder="Your name" required>
                    <input type="text" id="name2" placeholder="Partner's name" required>
                </div>
                
                <button id="calculate-btn">Calculate Love</button>
                
                <div id="love-result" class="result-container" style="display: none;">
                    <div class="result-title" id="result-percentage">0%</div>
                    <p id="result-text"></p>
                </div>
            </div>
        </div>
        
        <!-- Couple Nickname Generator Tab -->
        <div id="nickname-generator" class="tab-content">
            <div class="tool-card">
                <h2>Couple Nickname Generator</h2>
                <p>Create your perfect couple name</p>
                
                <div class="input-group">
                    <input type="text" id="nickname1" placeholder="Your name" required>
                    <input type="text" id="nickname2" placeholder="Partner's name" required>
                </div>
                
                <button id="generate-nickname-btn">Generate Nickname</button>
                
                <div id="nickname-result" class="result-container" style="display: none;">
                    <div class="result-title">Your Couple Name:</div>
                    <p id="generated-nickname" style="font-size: 1.5rem; font-weight: bold;"></p>
                    <p id="nickname-description" style="margin-top: 1rem;"></p>
                </div>
            </div>
        </div>
        
        <!-- Love Timeline Tab -->
        <div id="love-timeline" class="tab-content">
            <div class="tool-card">
                <h2>Love Timeline</h2>
                <p>See what the future holds for your relationship</p>
                
                <div class="input-group">
                    <input type="text" id="timeline-name1" placeholder="Your name" required>
                    <input type="text" id="timeline-name2" placeholder="Partner's name" required>
                    <select id="timeline-length">
                        <option value="5">Next 5 years</option>
                        <option value="10" selected>Next 10 years</option>
                        <option value="20">Next 20 years</option>
                    </select>
                </div>
                
                <button id="generate-timeline-btn">Generate Timeline</button>
                
                <div id="timeline-result" style="display: none; margin-top: 2rem;">
                    <h3 style="color: var(--dark); margin-bottom: 1rem;">Your Love Journey</h3>
                    <div class="timeline" id="timeline-container"></div>
                </div>
            </div>
        </div>
        
        <!-- Anniversary Counter Tab -->
        <div id="anniversary-counter" class="tab-content">
            <div class="tool-card">
                <h2>Anniversary Counter</h2>
                <p>Track how long you've been together</p>
                
                <div class="input-group">
                    <label for="anniversary-date">Your anniversary date:</label>
                    <input type="date" id="anniversary-date" required>
                </div>
                
                <button id="calculate-anniversary-btn">Calculate</button>
                
                <div id="anniversary-result" class="result-container" style="display: none;">
                    <div class="result-title">You've been together for</div>
                    <div class="counter-display">
                        <span id="days-together">0</span>
                        <span class="counter-unit">days</span>
                    </div>
                    <div style="margin-top: 1.5rem;">
                        <p>That's <span id="years-together" style="font-weight: bold;">0</span> years, 
                        <span id="months-together" style="font-weight: bold;">0</span> months, and 
                        <span id="remaining-days" style="font-weight: bold;">0</span> days!</p>
                    </div>
                    <div style="margin-top: 1rem; font-style: italic;">
                        <p>Your next anniversary is in <span id="next-anniversary" style="font-weight: bold;"></span> days!</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Date Ideas Generator Tab -->
        <div id="date-ideas" class="tab-content">
            <div class="tool-card">
                <h2>Virtual Date Idea Generator</h2>
                <p>Find perfect date ideas for any mood or budget</p>
                
                <div class="input-group">
                    <select id="date-type">
                        <option value="random">Any Type</option>
                        <option value="romantic">Romantic</option>
                        <option value="adventure">Adventure</option>
                        <option value="cozy">Cozy</option>
                        <option value="creative">Creative</option>
                    </select>
                    
                    <select id="date-budget">
                        <option value="any">Any Budget</option>
                        <option value="free">Free</option>
                        <option value="cheap">Under $20</option>
                        <option value="medium">$20-$50</option>
                        <option value="luxury">Splurge!</option>
                    </select>
                </div>
                
                <button id="generate-date-ideas-btn">Generate Ideas</button>
                
                <div id="date-ideas-result" style="display: none; margin-top: 2rem;">
                    <h3 style="color: var(--dark); margin-bottom: 1rem;">Your Perfect Date Ideas</h3>
                    <div class="date-ideas" id="date-ideas-container"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // AD LINKS - Replace these with your actual affiliate/ad links
        const AD_LINKS = {
            CALCULATE: "https://example.com/ads/lovecalc",
            NICKNAME: "https://example.com/ads/nickname",
            TIMELINE: "https://example.com/ads/timeline",
            ANNIVERSARY: "https://example.com/ads/anniversary",
            DATE_IDEAS: "https://example.com/ads/dateideas"
        };

        // Create floating hearts
        function createHearts() {
            const container = document.getElementById('hearts-container');
            const colors = ['#ff6b8b', '#ff8e9e', '#d23369', '#ffb3c1'];
            
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                
                // Random properties
                const size = Math.random() * 15 + 10;
                const posX = Math.random() * 100;
                const delay = Math.random() * 5;
                const duration = Math.random() * 3 + 4;
                const color = colors[Math.floor(Math.random() * colors.length)];
                
                heart.style.left = `${posX}%`;
                heart.style.width = `${size}px`;
                heart.style.height = `${size}px`;
                heart.style.animationDelay = `${delay}s`;
                heart.style.animationDuration = `${duration}s`;
                
                // Set color
                heart.style.setProperty('--primary', color);
                
                container.appendChild(heart);
            }
        }
        
        // Tab Switching Functionality
        function setupTabs() {
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all buttons and contents
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding content
                    btn.classList.add('active');
                    const tabId = btn.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
        
        // Love Calculator Functions
        function setupLoveCalculator() {
            const calculateBtn = document.getElementById('calculate-btn');
            
            calculateBtn.addEventListener('click', function() {
                // First open ad in new tab
                window.open(AD_LINKS.CALCULATE, '_blank');
                
                const name1 = document.getElementById('name1').value.trim();
                const name2 = document.getElementById('name2').value.trim();
                
                if (!name1 || !name2) {
                    alert('Please enter both names!');
                    return;
                }
                
                // Show loading state
                calculateBtn.textContent = 'Calculating...';
                calculateBtn.disabled = true;
                
                // Simulate calculation delay
                setTimeout(() => {
                    const percentage = calculateLove(name1, name2);
                    const message = getLoveMessage(percentage);
                    
                    document.getElementById('result-percentage').textContent = `${percentage}%`;
                    document.getElementById('result-text').textContent = message;
                    document.getElementById('love-result').style.display = 'block';
                    
                    // Reset button
                    calculateBtn.textContent = 'Calculate Love';
                    calculateBtn.disabled = false;
                }, 1500);
            });
        }
        
        function calculateLove(name1, name2) {
            // Simple hash to make same names return same result
            const combined = (name1 + name2).toLowerCase();
            let hash = 0;
            
            for (let i = 0; i < combined.length; i++) {
                hash = combined.charCodeAt(i) + ((hash << 5) - hash);
            }
            
            // Use hash to seed random but ensure it's between 75-100%
            const seededRandom = (hash % 26) / 100;
            const percentage = Math.floor(75 + (seededRandom * 25));
            
            return percentage;
        }
        
        function getLoveMessage(percentage) {
            const messages = [
                "A cosmic connection! The stars have aligned for you two.",
                "Incredible chemistry! You complement each other perfectly.",
                "A strong bond! Your relationship has great potential.",
                "A promising match! With effort, this could blossom into something beautiful.",
                "A good foundation! Keep nurturing your connection."
            ];
            
            // All results are 75-100% so we don't need negative messages
            return messages[Math.min(Math.floor((percentage - 75) / 5), messages.length - 1)];
        }
        
        // Couple Nickname Generator Functions
        function setupNicknameGenerator() {
            const generateBtn = document.getElementById('generate-nickname-btn');
            
            generateBtn.addEventListener('click', function() {
                // First open ad in new tab
                window.open(AD_LINKS.NICKNAME, '_blank');
                
                const name1 = document.getElementById('nickname1').value.trim();
                const name2 = document.getElementById('nickname2').value.trim();
                
                if (!name1 || !name2) {
                    alert('Please enter both names!');
                    return;
                }
                
                // Show loading state
                generateBtn.textContent = 'Creating...';
                generateBtn.disabled = true;
                
                // Simulate generation delay
                setTimeout(() => {
                    const { nickname, description } = generateCoupleNickname(name1, name2);
                    
                    document.getElementById('generated-nickname').textContent = nickname;
                    document.getElementById('nickname-description').textContent = description;
                    document.getElementById('nickname-result').style.display = 'block';
                    
                    // Reset button
                    generateBtn.textContent = 'Generate Nickname';
                    generateBtn.disabled = false;
                }, 1000);
            });
        }
        
        function generateCoupleNickname(name1, name2) {
            // Common nickname patterns
            const patterns = [
                {
                    combo: (a, b) => a.slice(0, Math.ceil(a.length / 2)) + b.slice(Math.floor(b.length / 2)),
                    desc: "A perfect blend of both your names!"
                },
                {
                    combo: (a, b) => a.charAt(0) + b,
                    desc: "The classic first-letter combo!"
                },
                {
                    combo: (a, b) => a + b.charAt(b.length - 1),
                    desc: "Your beginning meets their end!"
                },
                {
                    combo: (a, b) => a.slice(0, 3) + b.slice(0, 3),
                    desc: "Short and sweet - just like your love!"
                },
                {
                    combo: (a, b) => "The " + a.slice(0, 2) + b.slice(0, 2) + " Duo",
                    desc: "A dynamic pairing for an amazing couple!"
                }
            ];
            
            // Randomly select a pattern
            const pattern = patterns[Math.floor(Math.random() * patterns.length)];
            const nickname = pattern.combo(name1, name2);
            
            return {
                nickname: nickname,
                description: pattern.desc
            };
        }
        
        // Love Timeline Functions
        function setupLoveTimeline() {
            const generateBtn = document.getElementById('generate-timeline-btn');
            
            generateBtn.addEventListener('click', function() {
                // First open ad in new tab
                window.open(AD_LINKS.TIMELINE, '_blank');
                
                const name1 = document.getElementById('timeline-name1').value.trim();
                const name2 = document.getElementById('timeline-name2').value.trim();
                const years = parseInt(document.getElementById('timeline-length').value);
                
                if (!name1 || !name2) {
                    alert('Please enter both names!');
                    return;
                }
                
                // Show loading state
                generateBtn.textContent = 'Predicting...';
                generateBtn.disabled = true;
                
                // Simulate generation delay
                setTimeout(() => {
                    const timeline = generateLoveTimeline(name1, name2, years);
                    displayTimeline(timeline);
                    
                    // Reset button
                    generateBtn.textContent = 'Generate Timeline';
                    generateBtn.disabled = false;
                }, 1500);
            });
        }
        
        function generateLoveTimeline(name1, name2, years) {
            const currentYear = new Date().getFullYear();
            const events = [];
            
            // Common timeline events
            const possibleEvents = [
                { type: "move", text: "Move in together" },
                { type: "pet", text: "Adopt a pet" },
                { type: "travel", text: "Take a dream vacation" },
                { type: "milestone", text: "Celebrate your {year} anniversary" },
                { type: "home", text: "Buy a home together" },
                { type: "challenge", text: "Overcome a big challenge" },
                { type: "growth", text: "Grow even closer" },
                { type: "family", text: "Start a family" },
                { type: "adventure", text: "Try something new together" }
            ];
            
            // Generate events for each year
            for (let i = 1; i <= years; i++) {
                const year = currentYear + i;
                const numEvents = Math.random() > 0.7 ? 2 : 1; // 30% chance of 2 events in a year
                
                for (let j = 0; j < numEvents; j++) {
                    const eventIndex = Math.floor(Math.random() * possibleEvents.length);
                    let eventText = possibleEvents[eventIndex].text;
                    
                    // Replace placeholders
                    eventText = eventText.replace('{year}', ordinalSuffix(i));
                    
                    events.push({
                        year: year,
                        text: eventText,
                        type: possibleEvents[eventIndex].type
                    });
                }
            }
            
            // Sort events by year
            events.sort((a, b) => a.year - b.year);
            
            // Ensure we don't have too many events
            return events.slice(0, Math.min(events.length, 10));
        }
        
        function ordinalSuffix(i) {
            const j = i % 10,
                  k = i % 100;
            if (j == 1 && k != 11) {
                return i + "st";
            }
            if (j == 2 && k != 12) {
                return i + "nd";
            }
            if (j == 3 && k != 13) {
                return i + "rd";
            }
            return i + "th";
        }
        
        function displayTimeline(events) {
            const container = document.getElementById('timeline-container');
            container.innerHTML = '';
            
            if (events.length === 0) {
                container.innerHTML = '<p>No events predicted yet. Your future is a blank canvas!</p>';
                return;
            }
            
            events.forEach((event, index) => {
                const item = document.createElement('div');
                item.className = 'timeline-item';
                
                const content = document.createElement('div');
                content.className = 'timeline-content';
                
                const year = document.createElement('div');
                year.className = 'timeline-year';
                year.textContent = event.year;
                
                const text = document.createElement('p');
                text.textContent = event.text;
                
                content.appendChild(year);
                content.appendChild(text);
                item.appendChild(content);
                container.appendChild(item);
            });
            
            document.getElementById('timeline-result').style.display = 'block';
        }
        
        // Anniversary Counter Functions
        function setupAnniversaryCounter() {
            const calculateBtn = document.getElementById('calculate-anniversary-btn');
            
            calculateBtn.addEventListener('click', function() {
                // First open ad in new tab
                window.open(AD_LINKS.ANNIVERSARY, '_blank');
                
                const dateStr = document.getElementById('anniversary-date').value;
                
                if (!dateStr) {
                    alert('Please select your anniversary date!');
                    return;
                }
                
                const anniversaryDate = new Date(dateStr);
                const today = new Date();
                
                if (anniversaryDate > today) {
                    alert('Your anniversary date cannot be in the future!');
                    return;
                }
                
                // Calculate time together
                const diffTime = Math.abs(today - anniversaryDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                // Calculate years, months, days
                let years = today.getFullYear() - anniversaryDate.getFullYear();
                let months = today.getMonth() - anniversaryDate.getMonth();
                let days = today.getDate() - anniversaryDate.getDate();
                
                if (days < 0) {
                    months--;
                    // Get days in previous month
                    const prevMonthLastDay = new Date(
                        today.getFullYear(),
                        today.getMonth(),
                        0
                    ).getDate();
                    days += prevMonthLastDay;
                }
                
                if (months < 0) {
                    years--;
                    months += 12;
                }
                
                // Calculate next anniversary
                const nextAnniversary = new Date(
                    today.getFullYear(),
                    anniversaryDate.getMonth(),
                    anniversaryDate.getDate()
                );
                
                if (nextAnniversary < today) {
                    nextAnniversary.setFullYear(nextAnniversary.getFullYear() + 1);
                }
                
                const daysToNextAnniversary = Math.ceil(
                    (nextAnniversary - today) / (1000 * 60 * 60 * 24)
                );
                
                // Display results
                document.getElementById('days-together').textContent = diffDays;
                document.getElementById('years-together').textContent = years;
                document.getElementById('months-together').textContent = months;
                document.getElementById('remaining-days').textContent = days;
                document.getElementById('next-anniversary').textContent = daysToNextAnniversary;
                
                document.getElementById('anniversary-result').style.display = 'block';
            });
        }
        
        // Date Ideas Generator Functions
        function setupDateIdeasGenerator() {
            const generateBtn = document.getElementById('generate-date-ideas-btn');
            
            generateBtn.addEventListener('click', function() {
                // First open ad in new tab
                window.open(AD_LINKS.DATE_IDEAS, '_blank');
                
                const type = document.getElementById('date-type').value;
                const budget = document.getElementById('date-budget').value;
                
                // Show loading state
                generateBtn.textContent = 'Creating...';
                generateBtn.disabled = true;
                
                // Simulate generation delay
                setTimeout(() => {
                    const ideas = generateDateIdeas(type, budget);
                    displayDateIdeas(ideas);
                    
                    // Reset button
                    generateBtn.textContent = 'Generate Ideas';
                    generateBtn.disabled = false;
                }, 1000);
            });
        }
        
        function generateDateIdeas(type, budget) {
            // Database of date ideas
            const allIdeas = [
                { 
                    title: "Stargazing Picnic", 
                    description: "Pack a basket, grab a blanket, and find a quiet spot under the stars.", 
                    type: "romantic", 
                    budget: "free" 
                },
                { 
                    title: "DIY Spa Night", 
                    description: "Face masks, massages, and relaxation at home.", 
                    type: "cozy", 
                    budget: "cheap" 
                },
                { 
                    title: "Virtual Museum Tour", 
                    description: "Explore world-class museums from your couch with online tours.", 
                    type: "creative", 
                    budget: "free" 
                },
                { 
                    title: "Cook-Off Challenge", 
                    description: "Pick a secret ingredient and see who can make the best dish.", 
                    type: "creative", 
                    budget: "cheap" 
                },
                { 
                    title: "Sunrise Hike", 
                    description: "Wake up early and hike to a viewpoint for sunrise.", 
                    type: "adventure", 
                    budget: "free" 
                },
                { 
                    title: "Wine Tasting Night", 
                    description: "Sample different wines with cheese pairings.", 
                    type: "romantic", 
                    budget: "medium" 
                },
                { 
                    title: "Pottery Class", 
                    description: "Get messy and creative with a pottery workshop.", 
                    type: "creative", 
                    budget: "medium" 
                },
                { 
                    title: "Weekend Getaway", 
                    description: "Surprise them with a trip to a nearby town.", 
                    type: "adventure", 
                    budget: "luxury" 
                },
                { 
                    title: "Bookstore Scavenger Hunt", 
                    description: "Create clues that lead to different books around a bookstore.", 
                    type: "creative", 
                    budget: "free" 
                },
                { 
                    title: "Fancy Dinner at Home", 
                    description: "Cook a restaurant-quality meal together with fancy plating.", 
                    type: "romantic", 
                    budget: "cheap" 
                },
                { 
                    title: "Amusement Park Day", 
                    description: "Ride rollercoasters and win stuffed animals.", 
                    type: "adventure", 
                    budget: "luxury" 
                },
                { 
                    title: "Blanket Fort Movie Night", 
                    description: "Build an epic fort and watch your favorite movies.", 
                    type: "cozy", 
                    budget: "free" 
                },
                { 
                    title: "Hot Air Balloon Ride", 
                    description: "Take in breathtaking views from above.", 
                    type: "romantic", 
                    budget: "luxury" 
                },
                { 
                    title: "Volunteer Together", 
                    description: "Spend time giving back to your community.", 
                    type: "creative", 
                    budget: "free" 
                },
                { 
                    title: "Dance Lesson", 
                    description: "Learn salsa, swing, or tango together.", 
                    type: "romantic", 
                    budget: "medium" 
                }
            ];
            
            // Filter by type and budget
            let filteredIdeas = allIdeas;
            
            if (type !== "random") {
                filteredIdeas = filteredIdeas.filter(idea => idea.type === type);
            }
            
            if (budget !== "any") {
                filteredIdeas = filteredIdeas.filter(idea => idea.budget === budget);
            }
            
            // Shuffle and pick 4 ideas
            const shuffled = [...filteredIdeas].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 4);
        }
        
        function displayDateIdeas(ideas) {
            const container = document.getElementById('date-ideas-container');
            container.innerHTML = '';
            
            if (ideas.length === 0) {
                container.innerHTML = '<p>No ideas found for your criteria. Try broadening your search!</p>';
                return;
            }
            
            ideas.forEach(idea => {
                const card = document.createElement('div');
                card.className = 'date-card';
                
                const title = document.createElement('h3');
                title.textContent = idea.title;
                
                const desc = document.createElement('p');
                desc.textContent = idea.description;
                
                card.appendChild(title);
                card.appendChild(desc);
                container.appendChild(card);
            });
            
            document.getElementById('date-ideas-result').style.display = 'block';
        }
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            createHearts();
            setupTabs();
            setupLoveCalculator();
            setupNicknameGenerator();
            setupLoveTimeline();
            setupAnniversaryCounter();
            setupDateIdeasGenerator();
        });
    </script>
</body>
</html>